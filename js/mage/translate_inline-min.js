var TranslateInline=Class.create();TranslateInline.prototype={initialize:function(a,d,c){this.ajaxUrl=d;this.area=c;this.trigTimer=null;this.trigContentEl=null;$$("*[translate]").each(this.initializeElement.bind(this));var b=this;Ajax.Responders.register({onComplete:function(){setTimeout(b.reinitElements.bind(b),50)}});this.trigEl=$(a);this.trigEl.observe("mouseover",this.trigHideClear.bind(this));this.trigEl.observe("mouseout",this.trigHideDelayed.bind(this));this.trigEl.observe("click",this.formShow.bind(this));this.helperDiv=document.createElement("div")},initializeElement:function(a){if(!a.initializedTranslate){a.addClassName("translate-inline");a.initializedTranslate=true;Event.observe(a,"mousemove",this.trigShow.bind(this,a));Event.observe(a,"mouseout",this.trigHideDelayed.bind(this))}},reinitElements:function(a){$$("*[translate]").each(this.initializeElement.bind(this))},trigShow:function(a){this.trigHideClear();var b=Element.cumulativeOffset(a);this.trigEl.style.left=b[0]+"px";this.trigEl.style.top=b[1]+"px";this.trigEl.style.display="block";this.trigContentEl=a},trigHide:function(){this.trigEl.style.display="none";this.trigContentEl=null},trigHideDelayed:function(){this.trigTimer=window.setTimeout(this.trigHide.bind(this),500)},trigHideClear:function(){clearInterval(this.trigTimer)},formShow:function(){if(this.formIsShown){return}this.formIsShown=true;var el=this.trigContentEl;if(!el){return}eval("var data = "+el.getAttribute("translate"));var content='<form id="translate-inline-form">';var t=new Template('<div class="magento_table_container"><table cellspacing="0"><tr><th class="label">Location:</th><td class="value">#{location}</td></tr><tr><th class="label">Scope:</th><td class="value">#{scope}</td></tr><tr><th class="label">Shown:</th><td class="value">#{shown_escape}</td></tr><tr><th class="label">Original:</th><td class="value">#{original_escape}</td></tr><tr><th class="label">Translated:</th><td class="value">#{translated_escape}</td></tr><tr><th class="label"><label for="perstore_#{i}">Store View Specific:</label></th><td class="value"><input id="perstore_#{i}" name="translate[#{i}][perstore]" type="checkbox" value="1"/></td></tr><tr><th class="label"><label for="custom_#{i}">Custom:</label></th><td class="value"><input name="translate[#{i}][original]" type="hidden" value="#{scope}::#{original_escape}"/><input id="custom_#{i}" name="translate[#{i}][custom]" class="input-text" value="#{translated_escape}" /></td></tr></table></div>');for(i=0;i<data.length;i++){data[i]["i"]=i;data[i]["shown_escape"]=this.escapeHTML(data[i]["shown"]);data[i]["translated_escape"]=this.escapeHTML(data[i]["translated"]);data[i]["original_escape"]=this.escapeHTML(data[i]["original"]);content+=t.evaluate(data[i])}content+='</form><p class="a-center accent">Please refresh the page to see your changes after submitting this form.</p>';this.overlayShowEffectOptions=Windows.overlayShowEffectOptions;this.overlayHideEffectOptions=Windows.overlayHideEffectOptions;Windows.overlayShowEffectOptions={duration:0};Windows.overlayHideEffectOptions={duration:0};Dialog.confirm(content,{draggable:true,resizable:true,closable:true,className:"magento",title:"Translation",width:650,height:470,zIndex:1000,recenterAuto:false,hideEffect:Element.hide,showEffect:Element.show,id:"translate-inline",buttonClass:"form-button button",okLabel:"Submit",ok:this.formOk.bind(this),cancel:this.formClose.bind(this),onClose:this.formClose.bind(this)})},formOk:function(d){if(this.formIsSubmitted){return}this.formIsSubmitted=true;var a=$("translate-inline-form").getInputs(),c={};for(var b=0;b<a.length;b++){if(a[b].type=="checkbox"){if(a[b].checked){c[a[b].name]=a[b].value}}else{c[a[b].name]=a[b].value}}c.area=this.area;new Ajax.Request(this.ajaxUrl,{method:"post",parameters:c,onComplete:this.ajaxComplete.bind(this,d)});this.formIsSubmitted=false},ajaxComplete:function(a,b){a.close();this.formClose(a)},formClose:function(a){Windows.overlayShowEffectOptions=this.overlayShowEffectOptions;Windows.overlayHideEffectOptions=this.overlayHideEffectOptions;this.formIsShown=false},escapeHTML:function(c){this.helperDiv.innerHTML="";var b=document.createTextNode(c);this.helperDiv.appendChild(b);var a=this.helperDiv.innerHTML;a=a.replace(/"/g,"&quot;");return a}};